---
api: "POST /api/v1.0/assertions"
title: "Emitir Certificados"
---

Emite um certificado, vinculado a um **evento**, para um destinatário.

O certificado é criado com status `PENDING` e se torna `ACCEPTED` após o destinatário aceitar.

<Request method="POST" url="/api/v1.0/assertions" auth="bearer" />

<Note>
  Toda emissão está vinculada a um evento e a uma badge.

  - Use `GET /api/v1.0/events` para localizar o `event_id`
  - Use `GET /api/v1.0/badges` para localizar o `badge_id`
</Note>

---

## Parâmetros do corpo (body)

<ParamField body="event_id" type="string" required>
  ID do evento vinculado à emissão.
</ParamField>

<ParamField body="badge_id" type="string" required>
  ID do badge utilizado na emissão.
</ParamField>

<ParamField body="recipient_name" type="string" required>
  Nome completo do destinatário.
</ParamField>

<ParamField body="recipient_email" type="string" required>
  E-mail do destinatário que receberá o convite.
</ParamField>

<ParamField body="recipient_number" type="string">
  Número do destinatário para notificações por SMS ou WhatsApp (formato E.164).

  _Exemplo:_ +5531987654321
</ParamField>

<ParamField body="reason" type="string" required>
  Motivo pelo qual o destinatário está recebendo o certificado.

  _Exemplo:_ Curso de Python para Data Science com duração de 40 horas no nível Intermediário
</ParamField>

---

## Resposta

<ResponseField name="assertion_id" type="string">
  Identificador único do certificado criado.
</ResponseField>

<ResponseField name="message" type="string">
  Mensagem de confirmação da emissão.
</ResponseField>

<ResponseField name="created_at" type="string">
  Data e hora da emissão (ISO 8601).
</ResponseField>

<Info>
  Por privacidade, a resposta não retorna dados pessoais do destinatário.\
  O acompanhamento do aceite deve ser feito via `GET /api/v1.0/assertions`.
</Info>

---

## Exemplo de resposta

<ResponseExample>

```json Response (201)
{
  "assertion_id": "assert_123",
  "message": "Certificado emitido com sucesso",
  "created_at": "2024-02-01T10:30:00Z"
}
```

</ResponseExample>

---

## Erros comuns

### Evento inexistente, finalizado ou não pertencente ao emissor

<ResponseExample>

```json Response (404)
{
  "error": "EVENT_NOT_FOUND",
  "message": "Evento não encontrado, finalizado ou não pertence ao emissor autenticado."
}
```

</ResponseExample>

### Badge inexistente ou não pertencente ao emissor

<ResponseExample>

```json Response (404)
{
  "error": "BADGE_NOT_FOUND",
  "message": "Badge não encontrado ou não pertence ao emissor autenticado."
}
```

</ResponseExample>

### Certificado já emitido para o mesmo destinatário

<ResponseExample>

```json Response (409)
{
  "error": "ASSERTION_ALREADY_EXISTS",
  "message": "Já existe uma emissão para este destinatário neste evento com esta badge."
}
```

</ResponseExample>

### Dados inválidos ou ausentes

<ResponseExample>

```json Response (400)
{
  "error": "VALIDATION_ERROR",
  "message": "Campos obrigatórios ausentes ou inválidos."
}
```

</ResponseExample>

### Saldo insuficiente para emissão

<ResponseExample>

```json Response (402)
{
  "error": "INSUFFICIENT_BALANCE",
  "message": "Saldo insuficiente para realizar a emissão do certificado."
}
```

</ResponseExample>

<Note>
  A emissão consome créditos no momento da criação do certificado.\
  Caso o saldo seja insuficiente, a emissão não é realizada.
</Note>