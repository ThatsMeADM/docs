---
api: "GET /api/v1.0/recipients"
title: "Buscar Destinatário"
---

Endpoint de **suporte operacional** para localizar **dados sensíveis informados no momento da emissão** de certificados.

Este endpoint **não realiza listagem geral de destinatários** e deve ser utilizado **exclusivamente** para conferência de informações quando um destinatário entra em contato com o emissor.

<Request method="GET" url="/api/v1.0/recipients" auth="bearer" />

<Warning>
  Este endpoint retorna dados sensíveis e possui regras restritivas de uso.\
  Não utilize para exploração, listagens amplas ou automações em massa.
</Warning>

---

## Regras de uso

Para realizar uma busca válida, é obrigatório informar:

- **um contexto de emissão**
  - `event_id` **ou**
  - `badge_id`

**e**

- **ao menos um identificador do destinatário**
  - `recipient_email`
  - `recipient_number`
  - `assertion_id`

Campos como `recipient_name` e `reason` são **auxiliares** e não garantem unicidade.

---

## Parâmetros de consulta

### Contexto (obrigatório)

<ParamField query="event_id" type="string">
  ID do evento associado à emissão.
</ParamField>

<ParamField query="badge_id" type="string">
  ID do badge utilizado na emissão.
</ParamField>

---

### Identificadores do destinatário (ao menos um obrigatório)

<ParamField query="assertion_id" type="string">
  ID do certificado emitido.
</ParamField>

<ParamField query="recipient_email" type="string">
  E-mail informado no momento da emissão.
</ParamField>

<ParamField query="recipient_number" type="string">
  Telefone informado no momento da emissão (formato E.164).

  _Exemplo:_ +5531987654321
</ParamField>

---

### Campos auxiliares (opcionais)

<ParamField query="recipient_name" type="string">
  Nome informado no momento da emissão.
</ParamField>

<ParamField query="reason" type="string">
  Motivo da emissão do certificado.
</ParamField>

---

## Resposta

<ResponseField name="data" type="array">
  Lista restrita de destinatários encontrados com base nos filtros informados.

  <Expandable title="items">
    <ResponseField name="assertion_id" type="string">
      ID do certificado emitido
    </ResponseField>
    <ResponseField name="status" type="string">
      Status do certificado (`PENDING` ou `ACCEPTED`)
    </ResponseField>
    <ResponseField name="created_at" type="string">
      Data e hora da emissão (ISO 8601)
    </ResponseField>
    <ResponseField name="recipient" type="object">
      Dados informados na emissão

      <Expandable title="properties">
        <ResponseField name="name" type="string">
          Nome do destinatário
        </ResponseField>
        <ResponseField name="email" type="string">
          E-mail do destinatário
        </ResponseField>
        <ResponseField name="number" type="string">
          Telefone do destinatário (quando informado)
        </ResponseField>
      </Expandable>
    </ResponseField>
    <ResponseField name="event_id" type="string">
      ID do evento associado
    </ResponseField>
    <ResponseField name="badge_id" type="string">
      ID do badge utilizado
    </ResponseField>
    <ResponseField name="reason" type="string">
      Motivo da emissão
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="count" type="number">
  Quantidade de registros retornados
</ResponseField>

<Info>
  O número de resultados é intencionalmente limitado para evitar exposição indevida de dados.
</Info>

---

## Exemplo de resposta

<ResponseExample>

```json Response (200)
{
  "data": [
    {
      "assertion_id": "assert_123",
      "status": "PENDING",
      "created_at": "2024-02-01T10:30:00Z",
      "recipient": {
        "name": "João Silva",
        "email": "joao@exemplo.com",
        "number": "+5531987654321"
      },
      "event_id": "event_456",
      "badge_id": "badge_789",
      "reason": "Curso de Python para Data Science com duração de 40 horas no nível Intermediário"
    }
  ],
  "count": 1
}
```

</ResponseExample>

---

## Exemplos de erro

### Filtros insuficientes (faltou contexto e/ou identificador)

<ResponseExample>

```json Response (400)
{
  "error": "INVALID_SEARCH",
  "message": "Informe event_id ou badge_id e pelo menos um dos seguintes: recipient_email, recipient_number ou assertion_id."
}
```

</ResponseExample>

### Nenhum resultado encontrado

<ResponseExample>

```json Response (404)
{
  "error": "NOT_FOUND",
  "message": "Nenhum destinatário encontrado para os filtros informados."
}
```

</ResponseExample>

### Rate limit (proteção contra uso indevido)

<ResponseExample>

```json Response (429)
{
  "error": "RATE_LIMITED",
  "message": "Muitas requisições. Aguarde alguns instantes e tente novamente."
}
```

</ResponseExample>

### Acesso não autorizado

<ResponseExample>

```json Response (401)
{
  "error": "UNAUTHORIZED",
  "message": "Token inválido ou ausente."
}
```

</ResponseExample>